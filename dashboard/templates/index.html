<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Somali Dialect Classifier - Building Africa's largest open Somali language corpus through systematic data collection from Wikipedia, BBC, HuggingFace, and SprÃ¥kbanken">
    <meta name="keywords" content="Somali NLP, dialect classification, machine learning, low-resource languages, open source, data pipeline">
    <meta name="author" content="Somali NLP Initiative">
    <meta name="theme-color" content="#2563eb">
    <title>Somali Dialect Classifier | Data Ingestion Dashboard</title>

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ‡¸ðŸ‡´</text></svg>">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.umd.min.js" defer></script>

    <style>
        /* ========================================
           CSS CUSTOM PROPERTIES (DESIGN TOKENS)
           ======================================== */
        :root {
            /* Brand Colors */
            --brand-primary: #2563eb;
            --brand-secondary: #7c3aed;
            --brand-accent: #10b981;

            /* Source Colors */
            --wikipedia: #3b82f6;
            --bbc: #ef4444;
            --huggingface: #10b981;
            --sprakbanken: #f59e0b;

            /* Semantic Colors */
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;

            /* Gray Scale */
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;

            /* Typography */
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-display: 'Plus Jakarta Sans', 'Inter', sans-serif;
            --font-mono: 'Fira Code', Monaco, monospace;

            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            --text-4xl: 2.25rem;
            --text-5xl: 3rem;

            /* Spacing */
            --space-4: 1rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-12: 3rem;
            --space-16: 4rem;

            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);

            /* Border Radius */
            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-full: 9999px;

            /* Transitions */
            --transition-fast: 150ms ease;
            --transition-base: 250ms ease;
            --transition-slow: 350ms ease;
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* ========================================
           BASE STYLES
           ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: var(--font-sans);
            background: var(--gray-50);
            color: var(--gray-900);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ========================================
           SKIP LINK (ACCESSIBILITY)
           ======================================== */
        .skip-link {
            position: absolute;
            top: -100px;
            left: 0;
            background: var(--brand-primary);
            color: white;
            padding: var(--space-4);
            text-decoration: none;
            border-radius: 0 0 var(--radius-md) 0;
            font-weight: 600;
            z-index: 9999;
        }

        .skip-link:focus {
            top: 0;
            outline: 2px solid white;
            outline-offset: 2px;
        }

        /* ========================================
           GLOBAL NAVIGATION (STICKY)
           ======================================== */
        .global-nav {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--gray-200);
            z-index: 1000;
            box-shadow: var(--shadow-sm);
        }

        .global-nav .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 72px;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            text-decoration: none;
            color: var(--gray-900);
        }

        .nav-brand-logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--brand-primary), var(--brand-secondary));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: var(--text-lg);
        }

        .nav-brand-text {
            display: flex;
            flex-direction: column;
        }

        .nav-brand-initiative {
            font-size: var(--text-xs);
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
        }

        .nav-brand-project {
            font-size: var(--text-base);
            font-weight: 700;
            font-family: var(--font-display);
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: var(--space-8);
            list-style: none;
        }

        .nav-links a {
            color: var(--gray-600);
            text-decoration: none;
            font-weight: 500;
            font-size: var(--text-sm);
            transition: color var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-links a:hover,
        .nav-links a:focus {
            color: var(--brand-primary);
            outline: none;
        }

        .nav-links a.active {
            color: var(--brand-primary);
            position: relative;
        }

        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--brand-primary);
            border-radius: 2px;
        }

        .nav-cta {
            background: var(--brand-primary);
            color: white !important;
            padding: 0.5rem 1.5rem;
            border-radius: var(--radius-md);
            font-weight: 600;
            transition: all var(--transition-base);
        }

        .nav-cta:hover,
        .nav-cta:focus {
            background: var(--brand-secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            color: white !important;
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: var(--text-2xl);
            cursor: pointer;
            color: var(--gray-700);
        }

        /* ========================================
           HERO SECTION
           ======================================== */
        .hero {
            background: linear-gradient(135deg, #1e40af 0%, var(--brand-primary) 50%, #3b82f6 100%);
            color: white;
            padding: var(--space-16) 0 calc(var(--space-16) + 80px);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
            position: relative;
            z-index: 1;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(8px);
            padding: 0.5rem var(--space-4);
            border-radius: var(--radius-full);
            font-size: var(--text-sm);
            font-weight: 600;
            margin-bottom: var(--space-4);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .hero h1 {
            font-family: var(--font-display);
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 800;
            margin-bottom: var(--space-4);
            line-height: 1.1;
        }

        .hero-tagline {
            font-size: var(--text-xl);
            font-weight: 500;
            opacity: 0.95;
            margin-bottom: var(--space-6);
            max-width: 800px;
        }

        .hero-description {
            font-size: var(--text-base);
            opacity: 0.9;
            max-width: 700px;
            margin-bottom: var(--space-8);
            line-height: 1.7;
        }

        /* Hero Stats */
        .hero-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-6);
            margin-top: var(--space-12);
        }

        .hero-stat {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            text-align: center;
            transition: all var(--transition-base);
        }

        .hero-stat:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-4px);
        }

        .hero-stat-value {
            font-size: var(--text-4xl);
            font-weight: 800;
            font-family: var(--font-display);
            display: block;
            margin-bottom: 0.5rem;
        }

        .hero-stat-label {
            font-size: var(--text-sm);
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
        }

        /* Hero CTAs */
        .hero-ctas {
            display: flex;
            gap: var(--space-4);
            margin-top: var(--space-8);
            flex-wrap: wrap;
        }

        .hero-cta {
            padding: 0.875rem var(--space-8);
            border-radius: var(--radius-lg);
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all var(--transition-base);
            font-size: var(--text-base);
        }

        .hero-cta-primary {
            background: white;
            color: var(--brand-primary);
            box-shadow: var(--shadow-lg);
        }

        .hero-cta-primary:hover {
            background: var(--gray-100);
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        .hero-cta-secondary {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .hero-cta-secondary:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* ========================================
           ML LIFECYCLE NAVIGATOR - PROFESSIONAL REDESIGN
           ======================================== */
        .ml-lifecycle {
            background: white;
            margin-top: -60px;
            position: relative;
            z-index: 10;
        }

        .ml-lifecycle .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-8) var(--space-6);
        }

        .lifecycle-header {
            text-align: center;
            margin-bottom: var(--space-12);
        }

        .lifecycle-header h2 {
            font-family: var(--font-display);
            font-size: var(--text-2xl);
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }

        .lifecycle-header p {
            color: var(--gray-600);
            font-size: var(--text-sm);
        }

        /* Pipeline Container with Connectors */
        .lifecycle-stages {
            display: flex;
            justify-content: center;
            align-items: stretch;
            gap: 0;
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Connector Lines Between Stages */
        .lifecycle-stage::after {
            content: '';
            position: absolute;
            top: 50%;
            right: -24px;
            width: 24px;
            height: 2px;
            background: var(--gray-300);
            transform: translateY(-50%);
            z-index: 0;
        }

        .lifecycle-stage:last-child::after {
            display: none;
        }

        .lifecycle-stage.completed::after {
            background: var(--success);
            animation: connectorGrow 400ms ease-out;
        }

        @keyframes connectorGrow {
            from {
                width: 0;
            }
            to {
                width: 24px;
            }
        }

        /* Stage Cards - Minimal & Professional */
        .lifecycle-stage {
            flex: 1;
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            text-align: center;
            transition: transform 150ms ease-out,
                        box-shadow 150ms ease-out,
                        border-color 150ms ease-out;
            cursor: pointer;
            position: relative;
            min-width: 160px;
            max-width: 200px;
        }

        /* Hover State - Subtle Lift */
        .lifecycle-stage:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-color: var(--brand-primary);
        }

        .lifecycle-stage:focus {
            outline: 2px solid var(--brand-primary);
            outline-offset: 2px;
        }

        /* Completed Stage */
        .lifecycle-stage.completed {
            border-color: var(--success);
            background: linear-gradient(to bottom, #f0fdf4 0%, white 100%);
        }

        /* Current/Active Stage */
        .lifecycle-stage.current {
            background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
            border-color: var(--brand-primary);
            color: white;
            box-shadow: 0 8px 16px rgba(37, 99, 235, 0.2);
        }

        /* Subtle Pulse Animation for Active Stage */
        .lifecycle-stage.current {
            animation: subtlePulse 2.5s ease-in-out infinite;
        }

        @keyframes subtlePulse {
            0%, 100% {
                box-shadow: 0 8px 16px rgba(37, 99, 235, 0.2);
            }
            50% {
                box-shadow: 0 8px 20px rgba(37, 99, 235, 0.28);
            }
        }

        /* Stage Number Badge */
        .lifecycle-stage-number {
            position: absolute;
            top: 12px;
            left: 12px;
            width: 32px;
            height: 32px;
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-xs);
            font-weight: 700;
            color: var(--gray-700);
            transition: all 200ms ease-out;
        }

        .lifecycle-stage.completed .lifecycle-stage-number {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .lifecycle-stage.completed .lifecycle-stage-number::before {
            content: 'âœ“';
            font-size: 14px;
        }

        .lifecycle-stage.current .lifecycle-stage-number {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.4);
            color: white;
            backdrop-filter: blur(8px);
        }

        /* Hide number text when completed (show checkmark instead) */
        .lifecycle-stage.completed .lifecycle-stage-number {
            font-size: 0;
        }

        /* Icon Styling */
        .lifecycle-stage-icon {
            font-size: 3rem;
            margin-bottom: var(--space-4);
            filter: grayscale(0.3);
            opacity: 0.9;
            transition: all 200ms ease-out;
        }

        .lifecycle-stage:hover .lifecycle-stage-icon {
            transform: scale(1.05);
            filter: grayscale(0);
            opacity: 1;
        }

        .lifecycle-stage.current .lifecycle-stage-icon {
            filter: grayscale(0);
            opacity: 1;
        }

        /* Stage Name */
        .lifecycle-stage-name {
            font-weight: 600;
            font-size: var(--text-base);
            margin-bottom: 0.5rem;
            letter-spacing: -0.01em;
        }

        /* Status Label */
        .lifecycle-stage-status {
            font-size: 11px;
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            font-weight: 600;
        }

        .lifecycle-stage.current .lifecycle-stage-status {
            opacity: 0.95;
        }

        /* Progress Bar - Only show on current stage */
        .lifecycle-stage-progress {
            margin-top: var(--space-4);
            height: 3px;
            background: rgba(0, 0, 0, 0.08);
            border-radius: var(--radius-full);
            overflow: hidden;
            opacity: 0;
            transition: opacity 200ms ease-out;
        }

        .lifecycle-stage.current .lifecycle-stage-progress {
            background: rgba(255, 255, 255, 0.25);
            opacity: 1;
        }

        .lifecycle-stage-progress-bar {
            height: 100%;
            background: var(--success);
            border-radius: var(--radius-full);
            transition: width 800ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        .lifecycle-stage.current .lifecycle-stage-progress-bar {
            background: white;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
        }

        /* Overall Progress Indicator */
        .lifecycle-overall-progress {
            margin-top: var(--space-8);
            text-align: center;
        }

        .lifecycle-overall-progress-label {
            font-size: var(--text-sm);
            color: var(--gray-600);
            margin-bottom: 0.75rem;
            font-weight: 500;
        }

        .lifecycle-overall-progress-bar {
            height: 6px;
            background: var(--gray-200);
            border-radius: var(--radius-full);
            overflow: hidden;
            max-width: 600px;
            margin: 0 auto;
        }

        .lifecycle-overall-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--brand-primary) 0%, var(--success) 100%);
            border-radius: var(--radius-full);
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Mobile Responsive Design */
        @media (max-width: 1024px) {
            .lifecycle-stages {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: var(--space-4);
            }

            .lifecycle-stage {
                max-width: none;
            }

            .lifecycle-stage::after {
                display: none;
            }
        }

        @media (max-width: 640px) {
            .lifecycle-stages {
                grid-template-columns: 1fr;
            }

            .lifecycle-stage {
                padding: var(--space-6);
            }

            .lifecycle-stage-icon {
                font-size: 2.5rem;
            }
        }

        /* Accessibility: Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            .lifecycle-stage,
            .lifecycle-stage-icon,
            .lifecycle-stage-number,
            .lifecycle-stage-progress-bar,
            .lifecycle-overall-progress-fill {
                animation: none !important;
                transition-duration: 0.01ms !important;
            }

            .lifecycle-stage:hover {
                transform: none;
            }
        }

        /* ========================================
           TAB NAVIGATION
           ======================================== */
        .dashboard-tabs {
            background: white;
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 72px;
            z-index: 100;
            border-bottom: 1px solid var(--gray-200);
        }

        .dashboard-tabs .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
        }

        .tab-list {
            display: flex;
            gap: var(--space-4);
            list-style: none;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .tab-list::-webkit-scrollbar {
            display: none;
        }

        .tab-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: var(--space-4) var(--space-6);
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            color: var(--gray-600);
            font-weight: 600;
            font-size: var(--text-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .tab-button:hover {
            color: var(--brand-primary);
            background: var(--gray-50);
        }

        .tab-button.active {
            color: var(--brand-primary);
            border-bottom-color: var(--brand-primary);
        }

        .tab-button:focus {
            outline: 2px solid var(--brand-primary);
            outline-offset: -2px;
        }

        /* ========================================
           TAB CONTENT
           ======================================== */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-panel {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-12) var(--space-6);
        }

        /* ========================================
           OVERVIEW TAB - SOURCE STATUS CARDS
           ======================================== */
        .source-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-6);
            margin-bottom: var(--space-12);
        }

        .source-card {
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            transition: all var(--transition-base);
            position: relative;
            overflow: hidden;
        }

        .source-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
        }

        .source-card.wikipedia::before {
            background: var(--wikipedia);
        }

        .source-card.bbc::before {
            background: var(--bbc);
        }

        .source-card.huggingface::before {
            background: var(--huggingface);
        }

        .source-card.sprakbanken::before {
            background: var(--sprakbanken);
        }

        .source-card:hover {
            border-color: var(--brand-primary);
            box-shadow: var(--shadow-lg);
            transform: translateY(-4px);
        }

        .source-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--space-4);
        }

        .source-card-title {
            font-weight: 700;
            font-size: var(--text-lg);
            color: var(--gray-900);
        }

        .source-card-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .source-card-badge.complete {
            background: #d1fae5;
            color: #065f46;
        }

        .source-card-metrics {
            display: grid;
            gap: var(--space-4);
        }

        .source-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .source-metric-label {
            color: var(--gray-600);
            font-size: var(--text-sm);
        }

        .source-metric-value {
            font-weight: 700;
            font-size: var(--text-lg);
            color: var(--gray-900);
        }

        .source-card-footer {
            margin-top: var(--space-6);
            padding-top: var(--space-4);
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: var(--text-xs);
            color: var(--gray-500);
        }

        /* ========================================
           CHARTS
           ======================================== */
        .charts-section {
            margin-bottom: var(--space-12);
        }

        .section-title {
            font-family: var(--font-display);
            font-size: var(--text-2xl);
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: var(--space-6);
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: var(--space-6);
        }

        .chart-card {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-base);
        }

        .chart-card:hover {
            box-shadow: var(--shadow-md);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-6);
        }

        .chart-title {
            font-weight: 600;
            font-size: var(--text-lg);
            color: var(--gray-900);
        }

        .chart-actions {
            display: flex;
            gap: var(--space-4);
        }

        .chart-action {
            background: var(--gray-100);
            border: none;
            padding: 0.5rem var(--space-4);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            color: var(--gray-700);
        }

        .chart-action:hover {
            background: var(--brand-primary);
            color: white;
        }

        .chart-canvas {
            position: relative;
            height: 300px;
        }

        /* ========================================
           DATA STORY SECTION
           ======================================== */
        .data-story {
            background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%);
            padding: var(--space-16) 0;
            margin: var(--space-16) 0;
        }

        .data-story .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
        }

        .data-story-header {
            text-align: center;
            margin-bottom: var(--space-12);
        }

        .data-story-header h2 {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 800;
            color: var(--gray-900);
            margin-bottom: var(--space-4);
        }

        .data-story-header p {
            font-size: var(--text-lg);
            color: var(--gray-700);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }

        .story-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-6);
        }

        .story-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-8);
            box-shadow: var(--shadow-md);
            transition: all var(--transition-base);
        }

        .story-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
        }

        .story-card-icon {
            font-size: var(--text-5xl);
            margin-bottom: var(--space-4);
        }

        .story-card-title {
            font-weight: 700;
            font-size: var(--text-xl);
            color: var(--gray-900);
            margin-bottom: var(--space-4);
        }

        .story-card-text {
            color: var(--gray-600);
            line-height: 1.7;
        }

        /* ========================================
           CONTRIBUTE SECTION
           ======================================== */
        .contribute {
            background: var(--gray-900);
            color: white;
            padding: var(--space-16) 0;
        }

        .contribute .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
            text-align: center;
        }

        .contribute h2 {
            font-family: var(--font-display);
            font-size: var(--text-4xl);
            font-weight: 800;
            margin-bottom: var(--space-6);
        }

        .contribute-text {
            font-size: var(--text-lg);
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto var(--space-12);
            line-height: 1.8;
        }

        .contribute-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-6);
            margin-bottom: var(--space-12);
        }

        .contribute-type {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            transition: all var(--transition-base);
        }

        .contribute-type:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }

        .contribute-type-icon {
            font-size: var(--text-3xl);
            margin-bottom: var(--space-4);
        }

        .contribute-type-title {
            font-weight: 600;
            font-size: var(--text-lg);
            margin-bottom: 0.5rem;
        }

        .contribute-type-text {
            font-size: var(--text-sm);
            opacity: 0.8;
        }

        .contribute-cta {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: white;
            color: var(--gray-900);
            padding: var(--space-4) var(--space-8);
            border-radius: var(--radius-lg);
            font-weight: 600;
            text-decoration: none;
            transition: all var(--transition-base);
            box-shadow: var(--shadow-lg);
        }

        .contribute-cta:hover {
            background: var(--gray-100);
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        /* ========================================
           FOOTER
           ======================================== */
        footer {
            background: var(--gray-100);
            padding: var(--space-12) 0 var(--space-6);
            border-top: 1px solid var(--gray-200);
        }

        footer .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-6);
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-8);
            margin-bottom: var(--space-8);
        }

        .footer-section h3 {
            font-weight: 700;
            font-size: var(--text-base);
            color: var(--gray-900);
            margin-bottom: var(--space-4);
        }

        .footer-links {
            list-style: none;
            display: grid;
            gap: var(--space-4);
        }

        .footer-links a {
            color: var(--gray-600);
            text-decoration: none;
            font-size: var(--text-sm);
            transition: color var(--transition-fast);
        }

        .footer-links a:hover {
            color: var(--brand-primary);
        }

        .footer-bottom {
            padding-top: var(--space-6);
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-4);
            font-size: var(--text-sm);
            color: var(--gray-600);
        }

        /* ========================================
           RESPONSIVE DESIGN
           ======================================== */
        @media (max-width: 1024px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .hero h1 {
                font-size: var(--text-3xl);
            }

            .hero-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .lifecycle-stages {
                grid-template-columns: 1fr;
            }

            .tab-list {
                justify-content: flex-start;
            }

            .source-grid {
                grid-template-columns: 1fr;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .story-cards {
                grid-template-columns: 1fr;
            }

            .contribute-types {
                grid-template-columns: 1fr;
            }

            .footer-grid {
                grid-template-columns: 1fr;
            }

            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .hero-stats {
                grid-template-columns: 1fr;
            }

            .hero-ctas {
                flex-direction: column;
                width: 100%;
            }

            .hero-cta {
                width: 100%;
                justify-content: center;
            }
        }

        /* ========================================
           UTILITY CLASSES
           ======================================== */
        .text-center {
            text-align: center;
        }

        .mb-4 {
            margin-bottom: var(--space-4);
        }

        .mb-6 {
            margin-bottom: var(--space-6);
        }

        .mb-8 {
            margin-bottom: var(--space-8);
        }

        .mt-8 {
            margin-top: var(--space-8);
        }

        /* ========================================
           LOADING STATE
           ======================================== */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-16);
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--gray-200);
            border-top-color: var(--brand-primary);
            border-radius: var(--radius-full);
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* ========================================
           ACCESSIBILITY IMPROVEMENTS
           ======================================== */
        *:focus-visible {
            outline: 2px solid var(--brand-primary);
            outline-offset: 2px;
        }

        button:focus-visible,
        a:focus-visible {
            outline: 2px solid var(--brand-primary);
            outline-offset: 2px;
        }

        /* ========================================
           COMPARISON TABLE
           ======================================== */
        .comparison-table {
            width: 100%;
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
        }

        .comparison-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th,
        .comparison-table td {
            padding: var(--space-4);
            text-align: left;
            border-bottom: 1px solid var(--gray-200);
        }

        .comparison-table th {
            background: var(--gray-50);
            font-weight: 600;
            font-size: var(--text-sm);
            color: var(--gray-700);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .comparison-table td {
            font-size: var(--text-sm);
            color: var(--gray-900);
        }

        .comparison-table tr:hover {
            background: var(--gray-50);
        }

        /* ========================================
           TECHNICAL REPORTS CARDS
           ======================================== */
        .report-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-6);
        }

        .report-card {
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            transition: all var(--transition-base);
        }

        .report-card:hover {
            border-color: var(--brand-primary);
            box-shadow: var(--shadow-md);
        }

        .report-card-icon {
            font-size: var(--text-3xl);
            margin-bottom: var(--space-4);
        }

        .report-card-title {
            font-weight: 600;
            font-size: var(--text-lg);
            margin-bottom: var(--space-4);
        }

        .report-card-description {
            font-size: var(--text-sm);
            color: var(--gray-600);
            margin-bottom: var(--space-6);
            line-height: 1.6;
        }

        .report-card-action {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--brand-primary);
            text-decoration: none;
            font-weight: 600;
            font-size: var(--text-sm);
            transition: all var(--transition-fast);
        }

        .report-card-action:hover {
            gap: 0.75rem;
        }
    </style>
</head>
<body>
    <!-- Skip to Main Content -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Global Navigation -->
    <nav class="global-nav" role="navigation" aria-label="Main navigation">
        <div class="container">
            <a href="#" class="nav-brand" aria-label="Somali NLP Initiative - Somali Dialect Classifier">
                <div class="nav-brand-logo">SN</div>
                <div class="nav-brand-text">
                    <span class="nav-brand-initiative">Somali NLP Initiative</span>
                    <span class="nav-brand-project">Dialect Classifier</span>
                </div>
            </a>
            <ul class="nav-links">
                <li><a href="#overview" class="nav-link">Overview</a></li>
                <li><a href="#story" class="nav-link">Story</a></li>
                <li><a href="https://github.com/somali-nlp/somali-dialect-classifier" target="_blank" class="nav-link">GitHub</a></li>
                <li><a href="#get-involved" class="nav-cta">Get Involved</a></li>
            </ul>
            <button class="mobile-menu-toggle" aria-label="Toggle mobile menu">â˜°</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero">
        <div class="container">
            <div class="hero-badge">
                <span>Fully Open Source</span>
            </div>
            <h1>Somali Dialect Classifier</h1>
            <p class="hero-tagline">Building Africa's Largest Open Somali Language Corpus</p>
            <p class="hero-description">
                Part of the Somali NLP Initiative, this project collects high-quality Somali text from Wikipedia, BBC Somali, HuggingFace, and SprÃ¥kbanken to create a comprehensive dataset for training dialect classification models.
            </p>

            <!-- Hero Stats (4 KPIs) -->
            <div class="hero-stats">
                <div class="hero-stat">
                    <span class="hero-stat-value" id="total-records" data-count="0">0</span>
                    <span class="hero-stat-label">Total Records</span>
                </div>
                <div class="hero-stat">
                    <span class="hero-stat-value" id="total-sources" data-count="0">0</span>
                    <span class="hero-stat-label">Data Sources</span>
                </div>
                <div class="hero-stat">
                    <span class="hero-stat-value" id="success-rate" data-count="0" data-suffix="%">0%</span>
                    <span class="hero-stat-label">Success Rate</span>
                </div>
                <div class="hero-stat">
                    <span class="hero-stat-value">Stage 1</span>
                    <span class="hero-stat-label">Data Ingestion</span>
                </div>
            </div>

            <!-- CTAs -->
            <div class="hero-ctas">
                <a href="#overview" class="hero-cta hero-cta-primary">
                    <span>View Dashboard</span>
                    <span>â†“</span>
                </a>
                <a href="https://github.com/somali-nlp/somali-dialect-classifier" class="hero-cta hero-cta-secondary" target="_blank" rel="noopener">
                    <span>GitHub</span>
                    <span>â†’</span>
                </a>
                <a href="#get-involved" class="hero-cta hero-cta-secondary">
                    <span>Contribute</span>
                </a>
            </div>
        </div>
    </header>

    <!-- ML Lifecycle Navigator -->
    <section class="ml-lifecycle" aria-label="Machine Learning Pipeline Stages">
        <div class="container">
            <div class="lifecycle-header">
                <h2>Pipeline Progress</h2>
                <p>Track progress from data collection to deployment</p>
            </div>
            <div class="lifecycle-stages">
                <!-- Stage 1: Data Ingestion (CURRENT) -->
                <div class="lifecycle-stage current completed" tabindex="0" role="button" aria-label="Data Ingestion - Current Stage - Complete">
                    <span class="lifecycle-stage-number">1</span>
                    <div class="lifecycle-stage-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/><path d="M3 12c0 1.66 4 3 9 3s9-1.34 9-3"/></svg>
                    </div>
                    <div class="lifecycle-stage-name">Data Ingestion</div>
                    <div class="lifecycle-stage-status">Current â€¢ Complete</div>
                    <div class="lifecycle-stage-progress">
                        <div class="lifecycle-stage-progress-bar" style="width: 100%"></div>
                    </div>
                </div>

                <!-- Stage 2: Preprocessing -->
                <div class="lifecycle-stage" tabindex="0" role="button" aria-label="Preprocessing - Upcoming">
                    <span class="lifecycle-stage-number">2</span>
                    <div class="lifecycle-stage-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>
                    </div>
                    <div class="lifecycle-stage-name">Preprocessing</div>
                    <div class="lifecycle-stage-status">Upcoming</div>
                    <div class="lifecycle-stage-progress">
                        <div class="lifecycle-stage-progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Stage 3: Model Training -->
                <div class="lifecycle-stage" tabindex="0" role="button" aria-label="Model Training - Upcoming">
                    <span class="lifecycle-stage-number">3</span>
                    <div class="lifecycle-stage-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="16" height="16" x="4" y="4" rx="2"/><rect width="6" height="6" x="9" y="9" rx="1"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M2 9h2"/><path d="M20 15h2"/><path d="M20 9h2"/><path d="M9 2v2"/><path d="M9 20v2"/></svg>
                    </div>
                    <div class="lifecycle-stage-name">Model Training</div>
                    <div class="lifecycle-stage-status">Upcoming</div>
                    <div class="lifecycle-stage-progress">
                        <div class="lifecycle-stage-progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Stage 4: Evaluation -->
                <div class="lifecycle-stage" tabindex="0" role="button" aria-label="Evaluation - Upcoming">
                    <span class="lifecycle-stage-number">4</span>
                    <div class="lifecycle-stage-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></svg>
                    </div>
                    <div class="lifecycle-stage-name">Evaluation</div>
                    <div class="lifecycle-stage-status">Upcoming</div>
                    <div class="lifecycle-stage-progress">
                        <div class="lifecycle-stage-progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Stage 5: Deployment -->
                <div class="lifecycle-stage" tabindex="0" role="button" aria-label="Deployment - Upcoming">
                    <span class="lifecycle-stage-number">5</span>
                    <div class="lifecycle-stage-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>
                    </div>
                    <div class="lifecycle-stage-name">Deployment</div>
                    <div class="lifecycle-stage-status">Upcoming</div>
                    <div class="lifecycle-stage-progress">
                        <div class="lifecycle-stage-progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Stage 6: Monitoring -->
                <div class="lifecycle-stage" tabindex="0" role="button" aria-label="Monitoring - Upcoming">
                    <span class="lifecycle-stage-number">6</span>
                    <div class="lifecycle-stage-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="2"/><path d="M4.93 19.07a10 10 0 0 1 0-14.14"/><path d="M7.76 16.24a6 6 0 0 1 0-8.49"/><path d="M16.24 7.76a6 6 0 0 1 0 8.49"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></svg>
                    </div>
                    <div class="lifecycle-stage-name">Monitoring</div>
                    <div class="lifecycle-stage-status">Upcoming</div>
                    <div class="lifecycle-stage-progress">
                        <div class="lifecycle-stage-progress-bar" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- Overall Progress Indicator -->
            <div class="lifecycle-overall-progress" role="progressbar" aria-valuenow="17" aria-valuemin="0" aria-valuemax="100" aria-label="Overall pipeline progress: 17% complete">
                <div class="lifecycle-overall-progress-label">Overall Progress: 17% Complete</div>
                <div class="lifecycle-overall-progress-bar">
                    <div class="lifecycle-overall-progress-fill" style="width: 17%"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Tab Navigation (Stage 1 Dashboard) -->
    <nav class="dashboard-tabs" role="navigation" aria-label="Dashboard sections">
        <div class="container">
            <ul class="tab-list" role="tablist">
                <li role="presentation">
                    <button class="tab-button active" role="tab" aria-selected="true" aria-controls="overview-panel" data-tab="overview">
                        <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg></span>
                        <span>Overview</span>
                    </button>
                </li>
                <li role="presentation">
                    <button class="tab-button" role="tab" aria-selected="false" aria-controls="sources-panel" data-tab="sources">
                        <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 17a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.9a2 2 0 0 1-1.69-.9l-.81-1.2a2 2 0 0 0-1.67-.9H8a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2Z"/><path d="M2 8v11a2 2 0 0 0 2 2h14"/></svg></span>
                        <span>Data Sources</span>
                    </button>
                </li>
                <li role="presentation">
                    <button class="tab-button" role="tab" aria-selected="false" aria-controls="quality-panel" data-tab="quality">
                        <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/><path d="m9 12 2 2 4-4"/></svg></span>
                        <span>Quality Insights</span>
                    </button>
                </li>
                <li role="presentation">
                    <button class="tab-button" role="tab" aria-selected="false" aria-controls="pipeline-panel" data-tab="pipeline">
                        <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 14 4-4"/><path d="M3.34 19a10 10 0 1 1 17.32 0"/></svg></span>
                        <span>Pipeline Performance</span>
                    </button>
                </li>
                <li role="presentation">
                    <button class="tab-button" role="tab" aria-selected="false" aria-controls="reports-panel" data-tab="reports">
                        <span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg></span>
                        <span>Technical Reports</span>
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Tab 1: Overview -->
        <div class="tab-content active" id="overview-panel" role="tabpanel" aria-labelledby="overview-tab">
            <div class="tab-panel">
                <h2 class="section-title">Data Ingestion Overview</h2>
                <p class="mb-8" style="color: var(--gray-600); font-size: var(--text-base);">
                    Real-time monitoring of data collection status across all sources. This dashboard tracks the systematic acquisition of Somali language text from four major repositories.
                </p>

                <!-- Source Status Cards -->
                <div class="source-grid">
                    <!-- Wikipedia -->
                    <article class="source-card wikipedia">
                        <div class="source-card-header">
                            <h3 class="source-card-title">Wikipedia Somali</h3>
                            <span class="source-card-badge complete">
                                <span>âœ“</span>
                                <span>Complete</span>
                            </span>
                        </div>
                        <div class="source-card-metrics">
                            <div class="source-metric">
                                <span class="source-metric-label">Records</span>
                                <span class="source-metric-value" data-value="9623">0</span>
                            </div>
                            <div class="source-metric">
                                <span class="source-metric-label">Percentage</span>
                                <span class="source-metric-value">70.1%</span>
                            </div>
                            <div class="source-metric">
                                <span class="source-metric-label">Success Rate</span>
                                <span class="source-metric-value">100%</span>
                            </div>
                        </div>
                        <div class="source-card-footer">
                            <span>Last run: Oct 21, 2025</span>
                            <span style="color: var(--success)">â—</span>
                        </div>
                    </article>

                    <!-- BBC Somali -->
                    <article class="source-card bbc">
                        <div class="source-card-header">
                            <h3 class="source-card-title">BBC Somali</h3>
                            <span class="source-card-badge complete">
                                <span>âœ“</span>
                                <span>Complete</span>
                            </span>
                        </div>
                        <div class="source-card-metrics">
                            <div class="source-metric">
                                <span class="source-metric-label">Records</span>
                                <span class="source-metric-value" data-value="49">0</span>
                            </div>
                            <div class="source-metric">
                                <span class="source-metric-label">Percentage</span>
                                <span class="source-metric-value">0.4%</span>
                            </div>
                            <div class="source-metric">
                                <span class="source-metric-label">Success Rate</span>
                                <span class="source-metric-value">98.0%</span>
                            </div>
                        </div>
                        <div class="source-card-footer">
                            <span>Last run: Oct 21, 2025</span>
                            <span style="color: var(--success)">â—</span>
                        </div>
                    </article>

                    <!-- HuggingFace -->
                    <article class="source-card huggingface">
                        <div class="source-card-header">
                            <h3 class="source-card-title">HuggingFace MC4</h3>
                            <span class="source-card-badge complete">
                                <span>âœ“</span>
                                <span>Complete</span>
                            </span>
                        </div>
                        <div class="source-card-metrics">
                            <div class="source-metric">
                                <span class="source-metric-label">Records</span>
                                <span class="source-metric-value" data-value="48">0</span>
                            </div>
                            <div class="source-metric">
                                <span class="source-metric-label">Percentage</span>
                                <span class="source-metric-value">0.3%</span>
                            </div>
                            <div class="source-metric">
                                <span class="source-metric-label">Success Rate</span>
                                <span class="source-metric-value">96.0%</span>
                            </div>
                        </div>
                        <div class="source-card-footer">
                            <span>Last run: Oct 21, 2025</span>
                            <span style="color: var(--success)">â—</span>
                        </div>
                    </article>

                    <!-- SprÃ¥kbanken -->
                    <article class="source-card sprakbanken">
                        <div class="source-card-header">
                            <h3 class="source-card-title">SprÃ¥kbanken</h3>
                            <span class="source-card-badge complete">
                                <span>âœ“</span>
                                <span>Complete</span>
                            </span>
                        </div>
                        <div class="source-card-metrics">
                            <div class="source-metric">
                                <span class="source-metric-label">Records</span>
                                <span class="source-metric-value" data-value="4015">0</span>
                            </div>
                            <div class="source-metric">
                                <span class="source-metric-label">Percentage</span>
                                <span class="source-metric-value">29.2%</span>
                            </div>
                            <div class="source-metric">
                                <span class="source-metric-label">Success Rate</span>
                                <span class="source-metric-value">100%</span>
                            </div>
                        </div>
                        <div class="source-card-footer">
                            <span>Last run: Oct 21, 2025</span>
                            <span style="color: var(--success)">â—</span>
                        </div>
                    </article>
                </div>

                <!-- Real-time Metrics Panel -->
                <div class="charts-section mt-8">
                    <h3 class="section-title">Processing Summary</h3>
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4 class="chart-title">Source Distribution</h4>
                            </div>
                            <div class="chart-canvas">
                                <canvas id="sourceDistributionChart" aria-label="Pie chart showing distribution of records across data sources"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4 class="chart-title">Success Rate by Source</h4>
                            </div>
                            <div class="chart-canvas">
                                <canvas id="successRateChart" aria-label="Bar chart showing success rates for each data source"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Data Sources -->
        <div class="tab-content" id="sources-panel" role="tabpanel" aria-labelledby="sources-tab">
            <div class="tab-panel">
                <h2 class="section-title">Data Sources Deep Dive</h2>
                <p class="mb-8" style="color: var(--gray-600); font-size: var(--text-base);">
                    Comprehensive analysis of each data source, including descriptions, quality metrics, and contribution to the overall corpus.
                </p>

                <!-- Source Comparison Chart -->
                <div class="charts-section">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Source Contribution (Records)</h3>
                            <div class="chart-actions">
                                <button class="chart-action" onclick="downloadChart('sourceComparisonChart')">Export PNG</button>
                            </div>
                        </div>
                        <div class="chart-canvas">
                            <canvas id="sourceComparisonChart" aria-label="Horizontal bar chart comparing record counts across sources"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Source Details Table -->
                <div class="mt-8">
                    <h3 class="section-title">Source Comparison Table</h3>
                    <div class="comparison-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Source</th>
                                    <th>Records</th>
                                    <th>Success Rate</th>
                                    <th>Avg Length</th>
                                    <th>Total Chars</th>
                                </tr>
                            </thead>
                            <tbody id="sourceTableBody">
                                <!-- Populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Why This Matters -->
                <div class="story-cards mt-8">
                    <div class="story-card">
                        <div class="story-card-icon">ðŸ“š</div>
                        <h3 class="story-card-title">Wikipedia: Encyclopedic Knowledge</h3>
                        <p class="story-card-text">
                            Wikipedia provides high-quality, structured Somali text covering diverse topics from history to science, forming the foundation of our corpus with comprehensive linguistic patterns.
                        </p>
                    </div>
                    <div class="story-card">
                        <div class="story-card-icon">ðŸ“°</div>
                        <h3 class="story-card-title">BBC Somali: Contemporary News</h3>
                        <p class="story-card-text">
                            BBC Somali Service delivers professionally edited news articles reflecting modern language usage, current events, and journalistic style essential for dialect understanding.
                        </p>
                    </div>
                    <div class="story-card">
                        <div class="story-card-icon">ðŸ¤—</div>
                        <h3 class="story-card-title">HuggingFace: ML-Ready Data</h3>
                        <p class="story-card-text">
                            HuggingFace MC4 dataset provides pre-processed, ML-optimized Somali text from web crawls, offering diverse informal language patterns and conversational styles.
                        </p>
                    </div>
                    <div class="story-card">
                        <div class="story-card-icon">ðŸ‡¸ðŸ‡ª</div>
                        <h3 class="story-card-title">SprÃ¥kbanken: Academic Corpus</h3>
                        <p class="story-card-text">
                            Sweden's language bank contributes linguistically annotated Somali text from academic research, providing high-quality linguistic metadata and formal language patterns.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 3: Quality Insights -->
        <div class="tab-content" id="quality-panel" role="tabpanel" aria-labelledby="quality-tab">
            <div class="tab-panel">
                <h2 class="section-title">Data Quality Analysis</h2>
                <p class="mb-8" style="color: var(--gray-600); font-size: var(--text-base);">
                    In-depth analysis of text characteristics, quality metrics, and data integrity across all sources.
                </p>

                <!-- Quality Charts -->
                <div class="charts-section">
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Text Length Distribution</h3>
                            </div>
                            <div class="chart-canvas">
                                <canvas id="textLengthChart" aria-label="Bar chart showing average text length by source"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">Deduplication Status</h3>
                            </div>
                            <div class="chart-canvas">
                                <canvas id="deduplicationChart" aria-label="Chart showing deduplication rates"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quality Metrics Summary -->
                <div class="mt-8">
                    <h3 class="section-title">Quality Metrics by Source</h3>
                    <div class="source-grid">
                        <div class="source-card">
                            <h4 class="source-card-title">Wikipedia Somali</h4>
                            <div class="source-card-metrics">
                                <div class="source-metric">
                                    <span class="source-metric-label">Min Length</span>
                                    <span class="source-metric-value">10 chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Max Length</span>
                                    <span class="source-metric-value">122K chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Mean Length</span>
                                    <span class="source-metric-value">4,416 chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Median Length</span>
                                    <span class="source-metric-value">1,917 chars</span>
                                </div>
                            </div>
                        </div>

                        <div class="source-card">
                            <h4 class="source-card-title">BBC Somali</h4>
                            <div class="source-card-metrics">
                                <div class="source-metric">
                                    <span class="source-metric-label">Min Length</span>
                                    <span class="source-metric-value">104 chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Max Length</span>
                                    <span class="source-metric-value">13K chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Mean Length</span>
                                    <span class="source-metric-value">4,933 chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Median Length</span>
                                    <span class="source-metric-value">4,499 chars</span>
                                </div>
                            </div>
                        </div>

                        <div class="source-card">
                            <h4 class="source-card-title">HuggingFace MC4</h4>
                            <div class="source-card-metrics">
                                <div class="source-metric">
                                    <span class="source-metric-label">Min Length</span>
                                    <span class="source-metric-value">103 chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Max Length</span>
                                    <span class="source-metric-value">107K chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Mean Length</span>
                                    <span class="source-metric-value">5,980 chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Median Length</span>
                                    <span class="source-metric-value">2,073 chars</span>
                                </div>
                            </div>
                        </div>

                        <div class="source-card">
                            <h4 class="source-card-title">SprÃ¥kbanken</h4>
                            <div class="source-card-metrics">
                                <div class="source-metric">
                                    <span class="source-metric-label">Min Length</span>
                                    <span class="source-metric-value">1 char</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Max Length</span>
                                    <span class="source-metric-value">925 chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Mean Length</span>
                                    <span class="source-metric-value">132 chars</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Median Length</span>
                                    <span class="source-metric-value">85 chars</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 4: Pipeline Performance -->
        <div class="tab-content" id="pipeline-panel" role="tabpanel" aria-labelledby="pipeline-tab">
            <div class="tab-panel">
                <h2 class="section-title">Pipeline Performance Metrics</h2>
                <p class="mb-8" style="color: var(--gray-600); font-size: var(--text-base);">
                    Real-time monitoring of processing speed, resource utilization, and pipeline efficiency.
                </p>

                <!-- Performance Charts -->
                <div class="charts-section">
                    <!-- Chart 1: Performance Efficiency (Bullet Graph) -->
                    <div class="chart-card" style="grid-column: 1 / -1;">
                        <div class="chart-canvas">
                            <canvas id="performanceBulletChart" aria-label="Performance efficiency bullet graph comparing sources"></canvas>
                        </div>
                    </div>

                    <!-- Chart 2: Quality vs Speed (Scatter) and Chart 3: Cumulative Timeline (Stream) -->
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-canvas">
                                <canvas id="qualityVsSpeedChart" aria-label="Scatter plot showing quality vs speed trade-off"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-canvas">
                                <canvas id="cumulativeTimelineChart" aria-label="Stream graph showing cumulative data collection timeline"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Summary -->
                <div class="mt-8">
                    <h3 class="section-title">Performance Summary</h3>
                    <div class="source-grid">
                        <div class="source-card">
                            <h4 class="source-card-title">Wikipedia Somali</h4>
                            <div class="source-card-metrics">
                                <div class="source-metric">
                                    <span class="source-metric-label">URLs/Second</span>
                                    <span class="source-metric-value">563</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Records/Minute</span>
                                    <span class="source-metric-value">33,778</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Duration</span>
                                    <span class="source-metric-value">17.1s</span>
                                </div>
                            </div>
                        </div>

                        <div class="source-card">
                            <h4 class="source-card-title">BBC Somali</h4>
                            <div class="source-card-metrics">
                                <div class="source-metric">
                                    <span class="source-metric-label">URLs/Second</span>
                                    <span class="source-metric-value">0.02</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Records/Minute</span>
                                    <span class="source-metric-value">0.98</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Duration</span>
                                    <span class="source-metric-value">3,004s</span>
                                </div>
                            </div>
                        </div>

                        <div class="source-card">
                            <h4 class="source-card-title">HuggingFace MC4</h4>
                            <div class="source-card-metrics">
                                <div class="source-metric">
                                    <span class="source-metric-label">URLs/Second</span>
                                    <span class="source-metric-value">0</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Records/Minute</span>
                                    <span class="source-metric-value">18.5</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Duration</span>
                                    <span class="source-metric-value">156s</span>
                                </div>
                            </div>
                        </div>

                        <div class="source-card">
                            <h4 class="source-card-title">SprÃ¥kbanken</h4>
                            <div class="source-card-metrics">
                                <div class="source-metric">
                                    <span class="source-metric-label">URLs/Second</span>
                                    <span class="source-metric-value">891</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Records/Minute</span>
                                    <span class="source-metric-value">53,430</span>
                                </div>
                                <div class="source-metric">
                                    <span class="source-metric-label">Duration</span>
                                    <span class="source-metric-value">4.5s</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 5: Technical Reports -->
        <div class="tab-content" id="reports-panel" role="tabpanel" aria-labelledby="reports-tab">
            <div class="tab-panel">
                <h2 class="section-title">Technical Documentation</h2>
                <p class="mb-8" style="color: var(--gray-600); font-size: var(--text-base);">
                    Access technical reports, data schemas, API documentation, and export options.
                </p>

                <!-- Report Cards -->
                <div class="report-cards">
                    <div class="report-card">
                        <div class="report-card-icon">ðŸ“Š</div>
                        <h3 class="report-card-title">Metrics Report (JSON)</h3>
                        <p class="report-card-description">
                            Complete metrics data including success rates, processing times, and quality statistics for all sources.
                        </p>
                        <a href="data/all_metrics.json" download class="report-card-action">
                            <span>Download JSON</span>
                            <span>â†’</span>
                        </a>
                    </div>

                    <div class="report-card">
                        <div class="report-card-icon">ðŸ“„</div>
                        <h3 class="report-card-title">Data Schema</h3>
                        <p class="report-card-description">
                            Comprehensive schema documentation for the Somali dialect corpus including field definitions and data types.
                        </p>
                        <a href="#" class="report-card-action" onclick="alert('Schema documentation coming soon!'); return false;">
                            <span>View Schema</span>
                            <span>â†’</span>
                        </a>
                    </div>

                    <div class="report-card">
                        <div class="report-card-icon">ðŸ”—</div>
                        <h3 class="report-card-title">API Documentation</h3>
                        <p class="report-card-description">
                            REST API endpoints for programmatic access to the corpus, including authentication and rate limits.
                        </p>
                        <a href="https://github.com/somali-nlp/somali-dialect-classifier/blob/main/docs/reference/api.md" target="_blank" rel="noopener" class="report-card-action">
                            <span>View API Docs</span>
                            <span>â†’</span>
                        </a>
                    </div>

                    <div class="report-card">
                        <div class="report-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
                        </div>
                        <h3 class="report-card-title">Export Formats</h3>
                        <p class="report-card-description">
                            Download the corpus in multiple formats: CSV, JSON, Parquet, or HuggingFace Datasets format.
                        </p>
                        <a href="#" class="report-card-action" onclick="alert('Export options coming soon!'); return false;">
                            <span>Export Options</span>
                            <span>â†’</span>
                        </a>
                    </div>

                    <div class="report-card">
                        <div class="report-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/><path d="M8 11h8"/><path d="M8 7h6"/></svg>
                        </div>
                        <h3 class="report-card-title">Usage Guide</h3>
                        <p class="report-card-description">
                            Step-by-step guide for loading and using the corpus in popular ML frameworks like PyTorch and TensorFlow.
                        </p>
                        <a href="https://github.com/somali-nlp/somali-dialect-classifier/tree/main/docs" target="_blank" rel="noopener" class="report-card-action">
                            <span>Read Guide</span>
                            <span>â†’</span>
                        </a>
                    </div>

                    <div class="report-card">
                        <div class="report-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m20 8-6 6"/><path d="m4 8 6 6"/><path d="M9 18h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2Z"/><path d="M8 22v-5"/><path d="M16 22v-5"/></svg>
                        </div>
                        <h3 class="report-card-title">Citation</h3>
                        <p class="report-card-description">
                            Academic citation information for referencing this corpus in research papers and publications.
                        </p>
                        <a href="#" class="report-card-action" onclick="alert('Citation format:\n\nSomali NLP Initiative. (2025). Somali Dialect Classifier Corpus. Available at: https://github.com/somali-nlp/somali-dialect-classifier'); return false;">
                            <span>Copy Citation</span>
                            <span>â†’</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Data Story Section -->
    <section class="data-story" id="story">
        <div class="container">
            <div class="data-story-header">
                <h2>The Journey From Raw Data to AI-Ready Corpus</h2>
                <p>
                    Low-resource languages like Somali face a critical barrier in NLP: lack of quality training data.
                    We built an automated, production-grade data pipeline to systematically collect, clean, and unify
                    Somali text from the web's most reliable sources. This is the foundation for advancing Somali
                    language AI and making dialect classification accessible to researchers worldwide.
                </p>
            </div>

            <div class="story-cards">
                <div class="story-card">
                    <div class="story-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                    </div>
                    <h3 class="story-card-title"><span id="story-records">0</span> Records Collected</h3>
                    <p class="story-card-text">
                        Through systematic crawling and API integration, we're assembling an open
                        Somali language corpus, providing researchers with access to diverse linguistic data.
                    </p>
                </div>

                <div class="story-card">
                    <div class="story-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
                    </div>
                    <h3 class="story-card-title"><span id="story-success">0</span>% Success Rate</h3>
                    <p class="story-card-text">
                        Our robust pipeline architecture achieves high reliability through intelligent error
                        handling, retry mechanisms, and source-specific optimization strategies.
                    </p>
                </div>

                <div class="story-card">
                    <div class="story-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                    </div>
                    <h3 class="story-card-title"><span id="story-sources">0</span> Data Sources</h3>
                    <p class="story-card-text">
                        By combining encyclopedic knowledge, journalism, ML datasets, and academic corpora,
                        we ensure comprehensive coverage of Somali dialects, registers, and domains.
                    </p>
                </div>

                <div class="story-card">
                    <div class="story-card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>
                    </div>
                    <h3 class="story-card-title">Open Source Impact</h3>
                    <p class="story-card-text">
                        Released under an open license, this corpus democratizes access to Somali NLP research,
                        enabling global collaboration and accelerating innovation for low-resource languages.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contribute Section -->
    <section class="contribute" id="get-involved">
        <div class="container">
            <h2>Help Build the Future of Somali NLP</h2>
            <p class="contribute-text">
                The Somali Dialect Classifier is an open-source project that thrives on community contributions.
                Whether you're a developer, linguist, researcher, or simply passionate about Somali language technology,
                there are many ways to get involved and make an impact.
            </p>

            <div class="contribute-types">
                <div class="contribute-type">
                    <div class="contribute-type-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></svg>
                    </div>
                    <h3 class="contribute-type-title">Submit Text</h3>
                    <p class="contribute-type-text">
                        Share Somali text samples, articles, or documents to expand our corpus.
                    </p>
                </div>

                <div class="contribute-type">
                    <div class="contribute-type-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
                    </div>
                    <h3 class="contribute-type-title">Improve Pipeline</h3>
                    <p class="contribute-type-text">
                        Contribute code to enhance data collection, processing, or quality checks.
                    </p>
                </div>

                <div class="contribute-type">
                    <div class="contribute-type-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/><path d="M12 10v6"/><path d="M9 13h6"/></svg>
                    </div>
                    <h3 class="contribute-type-title">Add Sources</h3>
                    <p class="contribute-type-text">
                        Identify and integrate new high-quality Somali language data sources.
                    </p>
                </div>

                <div class="contribute-type">
                    <div class="contribute-type-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>
                    </div>
                    <h3 class="contribute-type-title">Research</h3>
                    <p class="contribute-type-text">
                        Use the corpus for research and share insights on Somali dialects.
                    </p>
                </div>
            </div>

            <a href="https://github.com/somali-nlp/somali-dialect-classifier" target="_blank" rel="noopener" class="contribute-cta">
                <span>View on GitHub</span>
                <span>â†’</span>
            </a>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>Somali NLP Initiative</h3>
                    <p style="color: var(--gray-600); font-size: var(--text-sm); margin-top: var(--space-4);">
                        Advancing natural language processing for Somali through open-source research,
                        collaborative development, and accessible AI tools.
                    </p>
                </div>

                <div class="footer-section">
                    <h3>Project</h3>
                    <ul class="footer-links">
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier" target="_blank" rel="noopener">GitHub Repository</a></li>
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier/blob/main/docs/roadmap/lifecycle.md" target="_blank" rel="noopener">Roadmap</a></li>
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier/issues" target="_blank" rel="noopener">Issues</a></li>
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier/releases" target="_blank" rel="noopener">Releases</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>Resources</h3>
                    <ul class="footer-links">
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier/tree/main/docs" target="_blank" rel="noopener">Documentation</a></li>
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier/blob/main/docs/reference/api.md" target="_blank" rel="noopener">API Reference</a></li>
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier/blob/main/docs/reference/silver-schema.md" target="_blank" rel="noopener">Data Schema</a></li>
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier/tree/main/docs/howto" target="_blank" rel="noopener">How-To Guides</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>Community</h3>
                    <ul class="footer-links">
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener">Contributing Guide</a></li>
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier/blob/main/CODE_OF_CONDUCT.md" target="_blank" rel="noopener">Code of Conduct</a></li>
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier/discussions" target="_blank" rel="noopener">Discussions</a></li>
                        <li><a href="https://github.com/somali-nlp/somali-dialect-classifier#contact" target="_blank" rel="noopener">Contact</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>Â© 2025 Somali NLP Initiative. Released under MIT License.</p>
                <p>Built with â¤ï¸ for low-resource language communities</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // ========================================
        // DATA LOADING
        // ========================================
        let metricsData = null;

        async function loadMetrics() {
            try {
                // Try both paths to support different serving contexts
                const paths = ['../data/all_metrics.json', 'data/all_metrics.json'];
                let metricsResponse = null;

                for (const path of paths) {
                    try {
                        const response = await fetch(path);
                        if (response.ok) {
                            metricsResponse = response;
                            break;
                        }
                    } catch (e) {
                        continue;
                    }
                }

                if (!metricsResponse) {
                    console.warn('âš  Could not load metrics from any path, using empty state');
                    return { metrics: [] };
                }

                metricsData = await metricsResponse.json();
                console.log('âœ“ Metrics loaded successfully:', metricsData);
                return metricsData;
            } catch (error) {
                console.error('âœ— Error loading metrics:', error);
                return { metrics: [] };
            }
        }

        // ========================================
        // COUNT-UP ANIMATION
        // ========================================
        function animateCountUp() {
            const elements = document.querySelectorAll('[data-count]');
            elements.forEach(el => {
                const target = parseFloat(el.dataset.count);
                const suffix = el.dataset.suffix || '';
                const duration = 2000;
                const start = performance.now();

                function update(currentTime) {
                    const elapsed = currentTime - start;
                    const progress = Math.min(elapsed / duration, 1);
                    const eased = 1 - Math.pow(1 - progress, 3); // easeOutCubic
                    const current = Math.floor(target * eased);

                    el.textContent = current.toLocaleString() + suffix;

                    if (progress < 1) {
                        requestAnimationFrame(update);
                    } else {
                        el.textContent = target.toLocaleString() + suffix;
                    }
                }

                requestAnimationFrame(update);
            });

            // Animate source cards
            const sourceValues = document.querySelectorAll('.source-metric-value[data-value]');
            sourceValues.forEach(el => {
                const target = parseInt(el.dataset.value);
                const duration = 2000;
                const start = performance.now();

                function update(currentTime) {
                    const elapsed = currentTime - start;
                    const progress = Math.min(elapsed / duration, 1);
                    const eased = 1 - Math.pow(1 - progress, 3);
                    const current = Math.floor(target * eased);

                    el.textContent = current.toLocaleString();

                    if (progress < 1) {
                        requestAnimationFrame(update);
                    } else {
                        el.textContent = target.toLocaleString();
                    }
                }

                requestAnimationFrame(update);
            });
        }

        // ========================================
        // UPDATE STATS FROM DATA
        // ========================================
        function updateStats() {
            if (!metricsData || !metricsData.metrics || metricsData.metrics.length === 0) {
                // Empty state - set all to 0
                console.log('No metrics data - displaying empty state');

                // Update hero stats
                document.getElementById('total-records').setAttribute('data-count', '0');
                document.getElementById('total-sources').setAttribute('data-count', '0');
                document.getElementById('success-rate').setAttribute('data-count', '0');

                // Update story cards
                document.getElementById('story-records').textContent = '0';
                document.getElementById('story-success').textContent = '0';
                document.getElementById('story-sources').textContent = '0';

                return;
            }

            // Calculate real metrics
            const metrics = metricsData.metrics;
            const totalRecords = metrics.reduce((sum, m) => sum + m.records_written, 0);
            const totalSources = new Set(metrics.map(m => m.source.split('-')[0])).size;
            const avgSuccessRate = metrics.reduce((sum, m) => sum + m.success_rate, 0) / metrics.length * 100;

            console.log('Calculated stats:', { totalRecords, totalSources, avgSuccessRate });

            // Update hero stats
            document.getElementById('total-records').setAttribute('data-count', totalRecords);
            document.getElementById('total-sources').setAttribute('data-count', totalSources);
            document.getElementById('success-rate').setAttribute('data-count', avgSuccessRate.toFixed(1));

            // Update story cards
            document.getElementById('story-records').textContent = totalRecords.toLocaleString();
            document.getElementById('story-success').textContent = avgSuccessRate.toFixed(1);
            document.getElementById('story-sources').textContent = totalSources;
        }

        // ========================================
        // TAB NAVIGATION
        // ========================================
        function initTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.dataset.tab;

                    // Update buttons
                    tabButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-selected', 'false');
                    });
                    button.classList.add('active');
                    button.setAttribute('aria-selected', 'true');

                    // Update content
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${targetTab}-panel`).classList.add('active');

                    // Update URL hash
                    window.location.hash = targetTab;
                });
            });

            // Handle initial hash
            const hash = window.location.hash.slice(1);
            if (hash && ['overview', 'sources', 'quality', 'pipeline', 'reports'].includes(hash)) {
                const button = document.querySelector(`[data-tab="${hash}"]`);
                if (button) button.click();
            }
        }

        // ========================================
        // CHARTS
        // ========================================
        function initCharts() {
            if (!metricsData) return;

            // Chart.js defaults
            Chart.defaults.font.family = "'Inter', sans-serif";
            Chart.defaults.color = '#6b7280';

            // Source Distribution (Donut)
            const sourceDistCtx = document.getElementById('sourceDistributionChart');
            if (sourceDistCtx && metricsData.metrics && metricsData.metrics.length > 0) {
                const sourceMap = new Map();
                metricsData.metrics.forEach(m => {
                    const name = m.source.replace(/-Somali|_Somali_c4-so|-Somali/, '').replace('Sprakbanken', 'SprÃ¥kbanken').replace('HuggingFace', 'HuggingFace');
                    sourceMap.set(name, (sourceMap.get(name) || 0) + m.records_written);
                });

                const labels = Array.from(sourceMap.keys());
                const data = Array.from(sourceMap.values());
                const colors = labels.map(label => {
                    if (label.includes('Wikipedia')) return '#3b82f6';
                    if (label.includes('BBC')) return '#ef4444';
                    if (label.includes('HuggingFace')) return '#10b981';
                    return '#f59e0b';
                });

                new Chart(sourceDistCtx, {
                    type: 'doughnut',
                    data: {
                        labels: labels,
                        datasets: [{
                            data: data,
                            backgroundColor: colors,
                            borderWidth: 2,
                            borderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    usePointStyle: true,
                                    font: {
                                        size: 12,
                                        weight: '500'
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        const percentage = ((context.parsed / total) * 100).toFixed(1);
                                        return `${context.label}: ${context.parsed.toLocaleString()} (${percentage}%)`;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Success Rate (Bar)
            const successRateCtx = document.getElementById('successRateChart');
            if (successRateCtx && metricsData.metrics && metricsData.metrics.length > 0) {
                const labels = metricsData.metrics.map(m => m.source.replace(/-Somali|_Somali_c4-so/, '').replace('Sprakbanken', 'SprÃ¥kbanken'));
                const data = metricsData.metrics.map(m => m.success_rate * 100);
                const colors = metricsData.metrics.map(m => {
                    if (m.source.includes('Wikipedia')) return '#3b82f6';
                    if (m.source.includes('BBC')) return '#ef4444';
                    if (m.source.includes('HuggingFace')) return '#10b981';
                    return '#f59e0b';
                });

                new Chart(successRateCtx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Success Rate',
                            data: data,
                            backgroundColor: colors,
                            borderRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                },
                                grid: {
                                    color: '#f3f4f6'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }

            // Source Comparison (Horizontal Bar)
            const sourceCompCtx = document.getElementById('sourceComparisonChart');
            if (sourceCompCtx && metricsData.metrics && metricsData.metrics.length > 0) {
                const labels = metricsData.metrics.map(m => m.source.replace(/-Somali|_Somali_c4-so/, '').replace('Sprakbanken', 'SprÃ¥kbanken'));
                const data = metricsData.metrics.map(m => m.records_written);
                const colors = metricsData.metrics.map(m => {
                    if (m.source.includes('Wikipedia')) return '#3b82f6';
                    if (m.source.includes('BBC')) return '#ef4444';
                    if (m.source.includes('HuggingFace')) return '#10b981';
                    return '#f59e0b';
                });

                new Chart(sourceCompCtx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Records',
                            data: data,
                            backgroundColor: colors,
                            borderRadius: 6
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value.toLocaleString();
                                    }
                                },
                                grid: {
                                    color: '#f3f4f6'
                                }
                            },
                            y: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }

            // Text Length Distribution
            const textLengthCtx = document.getElementById('textLengthChart');
            if (textLengthCtx && metricsData.metrics && metricsData.metrics.length > 0) {
                const labels = metricsData.metrics.map(m => m.source.replace(/-Somali|_Somali_c4-so/, '').replace('Sprakbanken', 'SprÃ¥kbanken'));
                const data = metricsData.metrics.map(m => m.quality?.avg_text_length || 0);
                const colors = metricsData.metrics.map(m => {
                    if (m.source.includes('Wikipedia')) return '#3b82f6';
                    if (m.source.includes('BBC')) return '#ef4444';
                    if (m.source.includes('HuggingFace')) return '#10b981';
                    return '#f59e0b';
                });

                new Chart(textLengthCtx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Avg Text Length (chars)',
                            data: data,
                            backgroundColor: colors,
                            borderRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return value.toLocaleString() + ' chars';
                                    }
                                },
                                grid: {
                                    color: '#f3f4f6'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }

            // Deduplication (Polar Area)
            const dedupCtx = document.getElementById('deduplicationChart');
            if (dedupCtx) {
                new Chart(dedupCtx, {
                    type: 'polarArea',
                    data: {
                        labels: ['Wikipedia', 'BBC Somali', 'HuggingFace', 'SprÃ¥kbanken'],
                        datasets: [{
                            label: 'Deduplication Rate',
                            data: [0, 0, 0, 0],
                            backgroundColor: [
                                'rgba(59, 130, 246, 0.6)',
                                'rgba(239, 68, 68, 0.6)',
                                'rgba(16, 185, 129, 0.6)',
                                'rgba(245, 158, 11, 0.6)'
                            ],
                            borderColor: [
                                '#3b82f6',
                                '#ef4444',
                                '#10b981',
                                '#f59e0b'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    usePointStyle: true
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${context.parsed.toFixed(1)}% duplicates removed`;
                                    }
                                }
                            }
                        },
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 10,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // CHART 1: Performance Efficiency Bullet Graph
            const bulletCtx = document.getElementById('performanceBulletChart');
            if (bulletCtx && metricsData.metrics && metricsData.metrics.length > 0) {
                const metrics = metricsData.metrics;
                const sources = metrics.map(m => m.source.replace(/-Somali|_Somali_c4-so|-Somali/, '').replace('HuggingFace', 'HF').replace('Sprakbanken', 'SprÃ¥k'));
                const recordsPerMin = metrics.map(m => m.performance.records_per_minute);
                const successRates = metrics.map(m => m.success_rate * 100);
                const maxRPM = Math.max(...recordsPerMin);

                // Calculate composite performance score (60% speed + 40% quality)
                const performanceScores = metrics.map((m, i) => {
                    const speedScore = (recordsPerMin[i] / maxRPM) * 100;
                    const qualityScore = successRates[i];
                    return (speedScore * 0.6 + qualityScore * 0.4);
                });

                // Create threshold arrays based on actual data length
                const numSources = sources.length;
                const poorThreshold = Array(numSources).fill(40);
                const fairThreshold = Array(numSources).fill(60);
                const goodThreshold = Array(numSources).fill(80);
                const excellentThreshold = Array(numSources).fill(100);

                new Chart(bulletCtx, {
                    type: 'bar',
                    data: {
                        labels: sources,
                        datasets: [
                            { label: 'Poor', data: poorThreshold, backgroundColor: 'rgba(239, 68, 68, 0.1)', borderWidth: 0, barPercentage: 1.0, order: 4 },
                            { label: 'Fair', data: fairThreshold, backgroundColor: 'rgba(251, 146, 60, 0.1)', borderWidth: 0, barPercentage: 1.0, order: 3 },
                            { label: 'Good', data: goodThreshold, backgroundColor: 'rgba(250, 204, 21, 0.1)', borderWidth: 0, barPercentage: 1.0, order: 2 },
                            { label: 'Excellent', data: excellentThreshold, backgroundColor: 'rgba(34, 197, 94, 0.1)', borderWidth: 0, barPercentage: 1.0, order: 1 },
                            { label: 'Performance Score', data: performanceScores, backgroundColor: ['#3b82f6', '#ef4444', '#10b981', '#f59e0b'], borderColor: '#1f2937', borderWidth: 2, barPercentage: 0.5, order: 0 }
                        ]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            title: { display: true, text: 'Performance Efficiency Score', font: { size: 16, weight: 700 }, padding: { bottom: 20 } },
                            subtitle: { display: true, text: 'Composite: 60% processing speed + 40% success rate', font: { size: 11 }, color: '#6b7280' },
                            legend: {
                                labels: {
                                    filter: (item) => ['Performance Score', 'Excellent', 'Good'].includes(item.text),
                                    usePointStyle: true,
                                    padding: 10,
                                    font: { size: 11 }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: (ctx) => {
                                        if (ctx.dataset.label === 'Performance Score') {
                                            const idx = ctx.dataIndex;
                                            return [
                                                `Overall Score: ${ctx.parsed.x.toFixed(1)}%`,
                                                `Speed: ${recordsPerMin[idx].toLocaleString()} RPM`,
                                                `Success: ${successRates[idx].toFixed(1)}%`,
                                                ctx.parsed.x >= 80 ? 'âœ“ Exceeds target' : 'âš  Below 80% target'
                                            ];
                                        }
                                        return null;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: { beginAtZero: true, max: 100, ticks: { callback: (v) => v + '%' }, grid: { color: 'rgba(0,0,0,0.05)' } },
                            y: { grid: { display: false } }
                        }
                    }
                });
            }

            // CHART 2: Quality vs Speed Scatter Plot
            const scatterCtx = document.getElementById('qualityVsSpeedChart');
            if (scatterCtx && metricsData.metrics) {
                const datasets = metricsData.metrics.map(m => {
                    const sourceShort = m.source.replace(/-Somali|_Somali_c4-so/, '').replace('Sprakbanken', 'SprÃ¥k').replace('HuggingFace', 'HF');
                    let color = m.source.includes('Wikipedia') ? '#3b82f6' :
                                m.source.includes('BBC') ? '#ef4444' :
                                m.source.includes('HuggingFace') ? '#10b981' : '#f59e0b';
                    const bubbleSize = Math.log10(m.records_written + 1) * 7 + 5;

                    return {
                        label: `${sourceShort} (${m.records_written.toLocaleString()})`,
                        data: [{
                            x: m.performance.records_per_minute,
                            y: m.success_rate * 100,
                            r: bubbleSize
                        }],
                        backgroundColor: color + 'aa',
                        borderColor: color,
                        borderWidth: 2
                    };
                });

                new Chart(scatterCtx, {
                    type: 'bubble',
                    data: { datasets },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            title: { display: true, text: 'Quality vs. Speed Trade-off', font: { size: 16, weight: 700 }, padding: { bottom: 15 } },
                            subtitle: { display: true, text: 'Bubble size = data volume (records)', font: { size: 11 }, color: '#6b7280' },
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: (ctx) => {
                                        const point = ctx.raw;
                                        return [
                                            `Speed: ${point.x.toLocaleString()} RPM`,
                                            `Quality: ${point.y.toFixed(1)}%`,
                                            point.x > 1000 && point.y > 95 ? 'âœ“ High Performance & Quality' : 'âš  Optimization Opportunity'
                                        ];
                                    }
                                }
                            }
                        },
                        scales: {
                            x: { type: 'logarithmic', title: { display: true, text: 'Processing Speed (RPM) - Log Scale', font: { size: 12, weight: 600 } }, ticks: { callback: (v) => v >= 1000 ? (v/1000).toFixed(0) + 'K' : v }, grid: { color: 'rgba(0,0,0,0.05)' } },
                            y: { beginAtZero: true, max: 100, title: { display: true, text: 'Success Rate (%)', font: { size: 12, weight: 600 } }, ticks: { callback: (v) => v + '%' }, grid: { color: 'rgba(0,0,0,0.05)' } }
                        }
                    }
                });
            }

            // CHART 3: Cumulative Timeline Stream Graph
            const timelineCtx = document.getElementById('cumulativeTimelineChart');
            if (timelineCtx && metricsData.metrics) {
                const sorted = [...metricsData.metrics].sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
                const sources = [...new Set(sorted.map(m => m.source))];

                const datasets = sources.map(source => {
                    const sourceShort = source.replace(/-Somali|_Somali_c4-so/, '').replace('Sprakbanken', 'SprÃ¥k').replace('HuggingFace', 'HF');
                    let color = source.includes('Wikipedia') ? '#3b82f6' :
                                source.includes('BBC') ? '#ef4444' :
                                source.includes('HuggingFace') ? '#10b981' : '#f59e0b';

                    let cumulative = 0;
                    const data = sorted.map(m => {
                        if (m.source === source) cumulative += m.records_written;
                        return { x: new Date(m.timestamp), y: cumulative };
                    });

                    return {
                        label: `${sourceShort} (${cumulative.toLocaleString()})`,
                        data: data,
                        backgroundColor: color + '66',
                        borderColor: color,
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 5
                    };
                });

                new Chart(timelineCtx, {
                    type: 'line',
                    data: { datasets },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            title: { display: true, text: 'Cumulative Data Collection Timeline', font: { size: 16, weight: 700 }, padding: { bottom: 15 } },
                            legend: { position: 'top', labels: { usePointStyle: true, padding: 12, font: { size: 11 } } },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    title: (items) => new Date(items[0].parsed.x).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' }),
                                    label: (ctx) => `${ctx.dataset.label.split(' ')[0]}: ${ctx.parsed.y.toLocaleString()} records`,
                                    footer: (items) => {
                                        const total = items.reduce((sum, item) => sum + item.parsed.y, 0);
                                        return `Total: ${total.toLocaleString()} records`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: { type: 'time', time: { unit: 'day', displayFormats: { day: 'MMM dd' } }, title: { display: true, text: 'Collection Date', font: { size: 12, weight: 600 } }, grid: { color: 'rgba(0,0,0,0.05)' } },
                            y: { beginAtZero: true, title: { display: true, text: 'Cumulative Records', font: { size: 12, weight: 600 } }, ticks: { callback: (v) => v >= 1000 ? (v/1000).toFixed(0) + 'K' : v }, grid: { color: 'rgba(0,0,0,0.05)' } }
                        }
                    }
                });
            }
        }

        // ========================================
        // POPULATE SOURCE TABLE
        // ========================================
        function populateSourceTable() {
            const tbody = document.getElementById('sourceTableBody');
            if (!tbody || !metricsData) return;

            const rows = [
                { name: 'Wikipedia Somali', records: 9623, success: '100%', avgLength: '4,416', totalChars: '4.4M' },
                { name: 'BBC Somali', records: 49, success: '98.0%', avgLength: '4,933', totalChars: '242K' },
                { name: 'HuggingFace MC4', records: 48, success: '96.0%', avgLength: '5,980', totalChars: '299K' },
                { name: 'SprÃ¥kbanken', records: 4015, success: '100%', avgLength: '132', totalChars: '132K' }
            ];

            tbody.innerHTML = rows.map(row => `
                <tr>
                    <td style="font-weight: 600;">${row.name}</td>
                    <td>${row.records.toLocaleString()}</td>
                    <td>${row.success}</td>
                    <td>${row.avgLength}</td>
                    <td>${row.totalChars}</td>
                </tr>
            `).join('');
        }

        // ========================================
        // CHART DOWNLOAD
        // ========================================
        function downloadChart(chartId) {
            const canvas = document.getElementById(chartId);
            if (!canvas) return;

            const url = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = `${chartId}-${Date.now()}.png`;
            link.href = url;
            link.click();
        }

        // ========================================
        // SMOOTH SCROLL
        // ========================================
        function initSmoothScroll() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href === '#' || href === '#overview' || href === '#sources' ||
                        href === '#quality' || href === '#pipeline' || href === '#reports') {
                        return; // Let tab navigation handle these
                    }

                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });
        }

        // ========================================
        // KEYBOARD NAVIGATION
        // ========================================
        function initKeyboardNav() {
            const stages = document.querySelectorAll('.lifecycle-stage');
            stages.forEach(stage => {
                stage.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        // Could open modal or show details
                        console.log('Stage clicked:', stage.querySelector('.lifecycle-stage-name').textContent);
                    }
                });
            });
        }

        // ========================================
        // SCROLL SPY
        // ========================================
        function initScrollSpy() {
            const sections = document.querySelectorAll('section[id], main[id]');
            const navLinks = document.querySelectorAll('.nav-link');

            // Height of sticky header for offset
            const navHeight = document.querySelector('.global-nav').offsetHeight;

            function updateActiveLink() {
                let currentSection = '';

                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.offsetHeight;
                    const scrollPosition = window.scrollY + navHeight + 100; // Offset for better UX

                    if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                        currentSection = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    const href = link.getAttribute('href');
                    if (href === `#${currentSection}`) {
                        link.classList.add('active');
                    }
                });
            }

            // Update on scroll with throttling for performance
            let ticking = false;
            window.addEventListener('scroll', () => {
                if (!ticking) {
                    window.requestAnimationFrame(() => {
                        updateActiveLink();
                        ticking = false;
                    });
                    ticking = true;
                }
            });

            // Initial update
            updateActiveLink();
        }

        // ========================================
        // INITIALIZATION
        // ========================================
        async function init() {
            console.log('ðŸš€ Initializing dashboard...');

            // Load data
            await loadMetrics();

            // Update all stats from loaded data
            updateStats();

            // Initialize components
            initTabs();
            initCharts();
            populateSourceTable();
            initSmoothScroll();
            initKeyboardNav();
            initScrollSpy();

            // Animate counts (after stats are updated)
            animateCountUp();

            console.log('âœ“ Dashboard initialized successfully');
        }

        // Run on DOM ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
